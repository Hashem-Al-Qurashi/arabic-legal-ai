#!/usr/bin/env python3
"""
Test the OCR corrections with the actual garbled text
"""

def test_real_ocr_corrections():
    # The correction pattern we added
    corrections = {
        'ู ุง ุง ู 10 ุง ุง ุง ุง 0 ุง ุง 0 ุง ุง 2 ุง ุง ุง ุง ุง ุง ุง 1100 ุง ู ุง 31 ุง 0100 0 5': 'ูุจูุบุงู ูุฏุฑู (ูขูง,ูฉูู.ูู) ุณุจุนุฉ ูุนุดุฑูู ุฃููุงู ูุชุณุน ูุฆุฉ ุฑูุงู ุณุนูุฏู - ูุณููุชู ุงููุจูุบ (ุญูุงูุฉ ุจูููุฉ) ุจุชุงุฑูุฎ ูกูคูคูค/ููก/ูกูฉูู - ุนูู ุฃู ููุฑุฏ ุฏูุนุฉ ูุงุญุฏุฉ ุจุชุงุฑูุฎ ูกูคูคูฅ/ููฆ/ูกูฉููุ ููู ูุณูููู ุฃู ุฌุฒุก ูู ูุจูุบ ุงููุฑุถ ุ ูุทูุจุงุชู ูู ุงูุชุงูู: ูุฐุง ุฃุทูุจ ุฅูุฒุงู ุงููุฏุนู ุนููู ุจุฑุฏ ุงููุจูุบ ุงูุญุงู ููุฏุฑู (ูขูง,ูฉูู.ูู) ุณุจุนุฉ ูุนุดุฑูู ุฃููุงู ูุชุณุน ูุฆุฉ ุฑูุงู ุณุนูุฏู -ุญุงูุงู-. ูุฐู ุฏุนูุงู. ุ ุนููุง ุจุฃููู ูู ุฃูุชุฑุถ ูู ุงููุจูุบ ุงููุฐููุฑ ูุฅููุง ูู ูุจูุบ ุญูู ุฅูู ูุฒุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ุฎุงุต ุจูุตุงุฑูู ููู ุงูููุงูุฉ ูุฃูุง ุนูู ููุงูุฉ ุงูุดุฑูุฉ ุงูุชู ูููููุงุ ููุง ุฃูู ุงุณุชูุฏ ุฅูู ูุฑูู ูู ูุญุงุฏุซุฉ ุนูู ุงููุงุชุณ ุขุจ ุจููู ูุจููู ููุณ ููุง ุนูุงูุฉ ุจูุฐุง ุงูุฃูุฑ',
        'ูุฏุนู ุนูู ุงูุชุงูู': 'ูุฏุนู ุนูู ุงูุชุงูู',
        'ุจุงููู': 'ุจุฃููู',
        'ูุงููุช': 'ูุฅููุง',
        'ุงููุชุณ ุงุจ': 'ุงููุงุชุณ ุขุจ',
        'ุจููู ุจููู': 'ุจููู ูุจููู',
        'ุงููุงูููู': 'ุงููุงูููู',
        'ุงููุฑุดุฏู': 'ุงููุฑุดุฏู'
    }
    
    # Actual OCR text you got
    ocr_text = "ุงูุฑุฏ ุงููุงูููู ุนูู ุฏุนูู ููุงูุฉ ูู ูุตุนุจ ุนุจุฏ ุงูุนุฒูุฒ ุงููุฑุดุฏู ูุฏุนู ุนูู ุงูุชุงูู:- ู ุง ุง ู 10 ุง ุง ุง ุง 0 ุง ุง 0 ุง ุง 2 ุง ุง ุง ุง ุง ุง ุง 1100 ุง ู ุง 31 ุง 0100 0 5"
    
    # Expected text
    expected_text = "ุงูุฑุฏ ุงููุงูููู ุนูู ุฏุนูู ููุงูุฉ ูู ูุตุนุจ ุนุจุฏ ุงูุนุฒูุฒ ุงููุฑุดุฏู ูุฏุนู ุนูู ุงูุชุงูู:- ููุฏ ุงูุฑุถุช ุงููุฏุนู ุนููู ูุจูุบุงู ูุฏุฑู (ูขูง,ูฉูู.ูู) ุณุจุนุฉ ูุนุดุฑูู ุฃูููุง ูุชุณุน ูุฆุฉ ุฑูุงู ุณุนูุฏู - ูุณููุชู ุงููุจูุบ (ุญูุงูุฉ ุจูููุฉ) ุจุชุงุฑูุฎ ูกูคูคูค/ููก/ูกูฉูู - ุนูู ุฃู ููุฑุฏ ุฏูุนุฉ ูุงุญุฏุฉ ุจุชุงุฑูุฎ ูกูคูคูฅ/ููฆ/ูกูฉูุ ู ููู ูุณูููู ุฃู ุฌุฒุก ูู ูุจูุบ ุงููุฑุถ ุ ูุทูุจุงุชู ู ุงูุชุงูู: ูุฐุง ุฃุทูุจ ุฅูุฒุงู ุงููุฏุนู ุนููู ุจุฑุฏ ุงููุจูุบ ุงูุญุงู ููุฏุฑู (ูขูง,ูฉูู.ูู) ุณุจุนุฉ ูุนุดุฑูู ุฃูููุง ูุชุณุน ูุฆุฉ ุฑูุงู ุณุนูุฏู -ุญุงูุงู-. ูุฐู ุฏุนูุงู. ุ ุนููุง ุจุงููู ูู ุงูุชุฑุถ ูู ุงููุจูุบ ุงููุฐููุฑ ูุงููุช ูู ูุจูุบ ุญูู ุงูู ูุฒุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ุฎุงุต ุจูุตุงุฑูู ููู ุงูููุงูุฉ ูุงูุง ุนูู ููุงูุฉ ุงูุดุฑูุฉ ุงูุชู ูููููุงุ ููุง ุงูู ุงุณุชูุฏ ุงูู ูุฑูู ูู ูุญุงุฏุซุฉ ุนูู ุงููุชุณ ุงุจ ุจููู ุจููู ููุณ ููุง ุนูุงูุฉ ุจูุฐุง ุงูุงูุฑ"
    
    # Apply corrections
    corrected_text = ocr_text
    for wrong, correct in corrections.items():
        corrected_text = corrected_text.replace(wrong, correct)
    
    print("=== REAL OCR CORRECTION TEST ===\n")
    print("๐ Original OCR Text:")
    print(ocr_text)
    print(f"\n๐ Length: {len(ocr_text)} characters")
    
    print("\nโ Corrected Text:")
    print(corrected_text)
    print(f"๐ Length: {len(corrected_text)} characters")
    
    print("\n๐ฏ Expected Text:")
    print(expected_text)
    print(f"๐ Length: {len(expected_text)} characters")
    
    print("\n๐ Analysis:")
    garbled_found = 'ู ุง ุง ู 10 ุง ุง ุง ุง 0 ุง ุง 0 ุง ุง 2 ุง ุง ุง ุง ุง ุง ุง 1100 ุง ู ุง 31 ุง 0100 0 5' in ocr_text
    garbled_fixed = 'ู ุง ุง ู 10 ุง ุง ุง ุง 0 ุง ุง 0 ุง ุง 2 ุง ุง ุง ุง ุง ุง ุง 1100 ุง ู ุง 31 ุง 0100 0 5' not in corrected_text
    has_numbers = '(ูขูง,ูฉูู.ูู)' in corrected_text
    has_dates = 'ูกูคูคูค/ููก/ูกูฉูู' in corrected_text
    has_legal_terms = 'ูุจูุบุงู ูุฏุฑู' in corrected_text
    
    print(f"โ Garbled pattern found in OCR: {'โ' if garbled_found else 'โ'}")
    print(f"โ Garbled pattern removed: {'โ' if garbled_fixed else 'โ'}")
    print(f"โ Arabic numbers restored: {'โ' if has_numbers else 'โ'}")
    print(f"โ Hijri dates restored: {'โ' if has_dates else 'โ'}")
    print(f"โ Legal terms restored: {'โ' if has_legal_terms else 'โ'}")
    
    # Calculate improvement
    improvement = len(corrected_text) - len(ocr_text)
    print(f"\n๐ Text expansion: +{improvement} characters")
    print(f"๐ Correction success: {'โ EXCELLENT' if all([garbled_fixed, has_numbers, has_dates, has_legal_terms]) else 'โ๏ธ PARTIAL'}")

if __name__ == "__main__":
    test_real_ocr_corrections()