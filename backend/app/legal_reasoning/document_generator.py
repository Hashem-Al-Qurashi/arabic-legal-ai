"""
Legal Document Generator - The Core of Lawyer Extinction System
Generates court-ready, professional legal documents that rival senior lawyers
"""

from typing import List, Dict, Any, Optional
from app.storage.vector_store import Chunk
from app.legal_reasoning.issue_analyzer import LegalIssue
from app.legal_reasoning.document_type_analyzer import DocumentType

class LegalDocumentGenerator:
    """Generates production-ready legal documents for specific use cases"""
    
    def __init__(self):
        """Initialize document generation templates and strategies"""
        pass
    
    def _generate_execution_dispute_prompt(
    self, 
    query: str, 
    retrieved_chunks: List[Chunk], 
    legal_issue: LegalIssue,
    document_type: DocumentType
) -> str:
        """Generate execution court dispute memo with 5-defense structure"""
        legal_context = self._format_legal_context(retrieved_chunks)
        return f"""Ø£Ù†Øª Ù…Ø­Ø§Ù…ÙŠ Ù…ØªØ®ØµØµ ÙÙŠ Ù‚Ø¶Ø§Ø¡ Ø§Ù„ØªÙ†ÙÙŠØ°. Ø§ÙƒØªØ¨ Ù…Ù†Ø§Ø²Ø¹Ø© ØªÙ†ÙÙŠØ° Ø±Ø³Ù…ÙŠØ© Ø¨Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯
ğŸ“š **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ:**
{legal_context}

ğŸ›ï¸ **Ù…Ù†Ø§Ø²Ø¹Ø© Ø§Ù„ØªÙ†ÙÙŠØ°:**
{query}

**Ù…Ø·Ù„ÙˆØ¨: Ù…Ù†Ø§Ø²Ø¹Ø© ØªÙ†ÙÙŠØ° ÙƒØ§Ù…Ù„Ø© ÙˆØ¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªÙ‚Ø¯ÙŠÙ…**

---

**Ù…Ù†Ø§Ø²Ø¹Ø© ØªÙ†ÙÙŠØ°**

**Ø¥Ù„Ù‰ ÙØ¶ÙŠÙ„Ø© Ø±Ø¦ÙŠØ³ Ù…Ø­ÙƒÙ…Ø© Ø§Ù„ØªÙ†ÙÙŠØ°**

**Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹:** Ù…Ù†Ø§Ø²Ø¹Ø© ØªÙ†ÙÙŠØ°

**Ø¥Ø´Ø§Ø±Ø© Ø¥Ù„Ù‰:** [Ø±Ù‚Ù… Ø§Ù„ØµÙƒ Ø£Ùˆ Ø§Ù„Ù‚Ø±Ø§Ø±]

**Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø£ÙˆÙ„:** [Ø£Ù‚ÙˆÙ‰ Ø¯ÙØ¹ Ø¥Ø¬Ø±Ø§Ø¦ÙŠ]
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠ:** ÙˆÙÙ‚Ø§Ù‹ Ù„Ù„Ù…Ø§Ø¯Ø© (X) Ù…Ù† Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ†ÙÙŠØ°
- **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:** [ØªØ·Ø¨ÙŠÙ‚ Ù…Ø­Ø¯Ø¯ Ø¹Ù„Ù‰ ÙˆÙ‚Ø§Ø¦Ø¹ Ø§Ù„Ù‚Ø¶ÙŠØ©]

**Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ:** [Ø¯ÙØ¹ Ù…ÙˆØ¶ÙˆØ¹ÙŠ Ù‚ÙˆÙŠ]
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠ:** Ø¨Ù…ÙˆØ¬Ø¨ Ø§Ù„Ù…Ø§Ø¯Ø© (Y) Ù…Ù† Ø§Ù„Ù„Ø§Ø¦Ø­Ø© Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠØ©
- **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:** [Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø­Ø¯Ø¯]

**Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø«Ø§Ù„Ø«:** [Ø¯ÙØ¹ Ø´Ø±Ø¹ÙŠ Ø£Ùˆ Ù†Ø¸Ø§Ù…ÙŠ]
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ø´Ø±Ø¹ÙŠ/Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠ:** Ø§Ø³ØªÙ†Ø§Ø¯Ø§Ù‹ Ù„Ù„Ù…Ø§Ø¯Ø© (Z)
- **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:** [Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§Ù„Ø©]

**Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø±Ø§Ø¨Ø¹:** [Ø¯ÙØ¹ Ø¥Ø¶Ø§ÙÙŠ Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø¶ÙŠØ©]
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠ:** Ø­Ø³Ø¨ Ø§Ù„Ù…Ø§Ø¯Ø© (W)
- **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:** [Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨]

**Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø®Ø§Ù…Ø³:** [Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ]
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠ:** ÙˆÙÙ‚Ø§Ù‹ Ù„Ù„Ù…Ø§Ø¯Ø© (V)
- **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:** [Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ]

**Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø°Ù„Ùƒ Ù†Ø·Ù„Ø¨ Ù…Ù† ÙØ¶ÙŠÙ„ØªÙƒÙ…:**
Ù¡- ÙˆÙ‚Ù Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªÙ†ÙÙŠØ°
Ù¢- Ø±ÙØ¶ Ø·Ù„Ø¨ Ø§Ù„ØªÙ†ÙÙŠØ° Ù„Ø¹Ø¯Ù… ØªÙˆÙØ± Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠØ©
Ù£- ØªØ­Ù…ÙŠÙ„ Ø·Ø§Ù„Ø¨ Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ø±Ø³ÙˆÙ… ÙˆØ§Ù„Ù…ØµØ§Ø±ÙŠÙ

**ÙˆØ§Ù„Ù„Ù‡ Ø§Ù„Ù…ÙˆÙÙ‚**

---

**âš ï¸ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø­Ø§Ø³Ù…Ø©:**
- Ø§Ø³ØªØ®Ø¯Ù… ÙÙ‚Ø· Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…Ø±ÙÙ‚Ø©
- Ø§Ø±Ø¨Ø· ÙƒÙ„ Ø¯ÙØ¹ Ø¨Ù…Ø§Ø¯Ø© Ù†Ø¸Ø§Ù…ÙŠØ© Ù…Ø­Ø¯Ø¯Ø©
- Ø§ÙƒØªØ¨ Ù…Ù†Ø§Ø²Ø¹Ø© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…Ø¨Ø§Ø´Ø±Ø©
- Ù„Ø§ Ù†ØµØ§Ø¦Ø­ Ø£Ùˆ Ø´Ø±ÙˆØ­Ø§Øª - ÙÙ‚Ø· Ø§Ù„Ù…Ø°ÙƒØ±Ø© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©"""

    def generate_document_prompt(
        self, 
        query: str, 
        retrieved_chunks: List[Chunk], 
        legal_issue: LegalIssue,
        document_type: DocumentType
    ) -> str:
        """Generate family court memo with intensive fiqh integration"""
        legal_context = self._format_legal_context(retrieved_chunks)
        return f"""Ø£Ù†Øª Ù…Ø­Ø§Ù…ÙŠ Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„Ø£Ø­ÙˆØ§Ù„ Ø§Ù„Ø´Ø®ØµÙŠØ©. Ø§ÙƒØªØ¨ Ù…Ø°ÙƒØ±Ø© Ø¬ÙˆØ§Ø¨ÙŠØ© Ø¨Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ø´Ø±Ø¹ÙŠØ©.

ğŸ“š **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ø´Ø±Ø¹ÙŠ ÙˆØ§Ù„Ù†Ø¸Ø§Ù…ÙŠ:**
{legal_context}

ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ **Ù‚Ø¶ÙŠØ© Ø§Ù„Ø£Ø­ÙˆØ§Ù„ Ø§Ù„Ø´Ø®ØµÙŠØ©:**
{query}

**Ù…Ø·Ù„ÙˆØ¨: Ù…Ø°ÙƒØ±Ø© Ø¬ÙˆØ§Ø¨ÙŠØ© Ø´Ø±Ø¹ÙŠØ© ÙƒØ§Ù…Ù„Ø©**

---

**Ù…Ø°ÙƒØ±Ø© Ø¬ÙˆØ§Ø¨ÙŠØ©**

**Ø¥Ù„Ù‰ ØµØ§Ø­Ø¨ Ø§Ù„ÙØ¶ÙŠÙ„Ø© Ø±Ø¦ÙŠØ³ Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø£Ø­ÙˆØ§Ù„ Ø§Ù„Ø´Ø®ØµÙŠØ©**

**Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹:** [Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ù‚Ø¶ÙŠØ©]

**Ø£ÙˆÙ„Ø§Ù‹: Ø¥Ù†ÙƒØ§Ø± Ù…Ø§ Ø¬Ø§Ø¡ ÙÙŠ Ø§Ù„Ø¯Ø¹ÙˆÙ‰ Ø¬Ù…Ù„Ø© ÙˆØªÙØµÙŠÙ„Ø§Ù‹**

**Ø«Ø§Ù†ÙŠØ§Ù‹: Ø§Ù„Ø¯ÙÙˆØ¹ Ø§Ù„Ø´Ø±Ø¹ÙŠØ© ÙˆØ§Ù„Ù†Ø¸Ø§Ù…ÙŠØ©:**

**Ù¡-** [Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¦ÙŠ Ø§Ù„Ø£ÙˆÙ„]
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ø´Ø±Ø¹ÙŠ:** Ù‚Ø§Ù„ ÙÙŠ Ø§Ù„Ù…Ø¨Ø³ÙˆØ·: [Ù†Øµ ÙÙ‚Ù‡ÙŠ Ù…Ù†Ø§Ø³Ø¨]
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠ:** ÙˆÙÙ‚Ø§Ù‹ Ù„Ù„Ù…Ø§Ø¯Ø© (X) Ù…Ù† Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±Ø§ÙØ¹Ø§Øª Ø§Ù„Ø´Ø±Ø¹ÙŠØ©
- **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:** [Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ ÙˆÙ‚Ø§Ø¦Ø¹ Ø§Ù„Ù‚Ø¶ÙŠØ©]

**Ù¢-** [Ø¯ÙØ¹ Ù…ÙˆØ¶ÙˆØ¹ÙŠ Ø¨Ø§Ù„Ø£Ø¯Ù„Ø© Ø§Ù„Ø´Ø±Ø¹ÙŠØ©]
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ø´Ø±Ø¹ÙŠ:** Ø¬Ø§Ø¡ ÙÙŠ Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø´Ø±Ø­ Ø§Ù„Ù‡Ø¯Ø§ÙŠØ©: [Ù†Øµ ÙÙ‚Ù‡ÙŠ]
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠ:** Ø¨Ù…ÙˆØ¬Ø¨ Ø§Ù„Ù…Ø§Ø¯Ø© (Y) Ù…Ù† Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø­ÙˆØ§Ù„ Ø§Ù„Ø´Ø®ØµÙŠØ©
- **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:** [Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø­Ø¯Ø¯]

**Ù£-** [Ø¯ÙØ¹ Ø¨Ø§Ù„Ø¨ÙŠÙ†Ø© Ø§Ù„Ø´Ø±Ø¹ÙŠØ©]
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ø´Ø±Ø¹ÙŠ:** Ù‚Ø§Ù„ ÙÙŠ Ø§Ù„ØªØ§Ø¬ ÙˆØ§Ù„Ø¥ÙƒÙ„ÙŠÙ„: [Ù†Øµ ÙÙ‚Ù‡ÙŠ]
- **Ù‚Ø§Ø¹Ø¯Ø© Ø´Ø±Ø¹ÙŠØ©:** Ø§Ù„Ø¨ÙŠÙ†Ø© Ø¹Ù„Ù‰ Ù…Ù† Ø§Ø¯Ø¹Ù‰ ÙˆØ§Ù„ÙŠÙ…ÙŠÙ† Ø¹Ù„Ù‰ Ù…Ù† Ø£Ù†ÙƒØ±
- **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:** [ÙƒÙŠÙ ÙŠÙ†Ø·Ø¨Ù‚ Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø¶ÙŠØ©]

**Ù¤-** [Ø¯ÙØ¹ Ø¨Ø£ØµÙˆÙ„ Ø§Ù„Ø´Ø±ÙŠØ¹Ø©]
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ø´Ø±Ø¹ÙŠ:** Ø°ÙƒØ± ÙÙŠ Ù…ÙˆØ§Ù‡Ø¨ Ø§Ù„Ø¬Ù„ÙŠÙ„: [Ù†Øµ ÙÙ‚Ù‡ÙŠ]
- **Ø§Ù„Ù…Ø¨Ø¯Ø£ Ø§Ù„Ø´Ø±Ø¹ÙŠ:** Ø§Ù„Ø£ØµÙ„ ÙÙŠ Ø§Ù„Ø¹Ù‚ÙˆØ¯ Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆØ§Ù„ØµØ­Ø©
- **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:** [Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø´Ø±Ø¹ÙŠ]

**Ù¥-** [Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ]
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ø´Ø±Ø¹ÙŠ:** Ù†Øµ ÙÙŠ Ø§Ù„Ù…ØºÙ†ÙŠ Ù„Ø§Ø¨Ù† Ù‚Ø¯Ø§Ù…Ø©: [Ù†Øµ ÙÙ‚Ù‡ÙŠ]
- **Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©:** Ù…Ù† Ø³Ø¹Ù‰ Ù„Ù†Ù‚Ø¶ Ù…Ø§ ØªÙ… Ø¹Ù„Ù‰ ÙŠØ¯Ù‡ ÙØ³Ø¹ÙŠÙ‡ Ù…Ø±Ø¯ÙˆØ¯ Ø¹Ù„ÙŠÙ‡
- **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:** [Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ]

**Ø«Ø§Ù„Ø«Ø§Ù‹: Ø§Ù„Ø·Ù„Ø¨Ø§Øª:**
Ø£ÙˆÙ„Ø§Ù‹: Ø±ÙØ¶ Ø§Ù„Ø¯Ø¹ÙˆÙ‰ Ù„Ø¹Ø¯Ù… ØµØ­ØªÙ‡Ø§ Ø´Ø±Ø¹Ø§Ù‹ ÙˆÙ†Ø¸Ø§Ù…Ø§Ù‹
Ø«Ø§Ù†ÙŠØ§Ù‹: ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¯Ø¹ÙŠ Ø§Ù„Ø±Ø³ÙˆÙ… ÙˆØ§Ù„Ù…ØµØ§Ø±ÙŠÙ
Ø«Ø§Ù„Ø«Ø§Ù‹: [Ø·Ù„Ø¨Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø¶ÙŠØ©]

**ÙˆØ§Ù„Ù„Ù‡ Ø£Ø¹Ù„Ù… ÙˆØ£Ø­ÙƒÙ…**

---

**âš ï¸ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø´Ø±Ø¹ÙŠØ© Ø­Ø§Ø³Ù…Ø©:**
- Ø§Ø³ØªØ®Ø¯Ù… ÙÙ‚Ø· Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„ÙÙ‚Ù‡ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…Ø±ÙÙ‚Ø©
- Ø§Ø±Ø¨Ø· ÙƒÙ„ Ø¯ÙØ¹ Ø¨Ù†Øµ ÙÙ‚Ù‡ÙŠ Ù…Ø­Ø¯Ø¯ + Ù…Ø§Ø¯Ø© Ù†Ø¸Ø§Ù…ÙŠØ©
- Ø§ÙƒØªØ¨ Ù…Ø°ÙƒØ±Ø© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªÙ‚Ø¯ÙŠÙ… Ù„Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø´Ø±Ø¹ÙŠØ©
- Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„ÙÙ‚Ù‡ÙŠØ© Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©"""

    def generate_document_prompt(
        self, 
        query: str, 
        retrieved_chunks: List[Chunk], 
        legal_issue: LegalIssue,
        document_type: DocumentType
    ) -> str:
        """Generate document-specific prompt based on document type analysis"""
        
        if document_type.specific_type == 'execution_dispute':
            return self._generate_execution_dispute_prompt(query, retrieved_chunks, legal_issue, document_type)
    
    # Your existing conditions continue...
        elif document_type.specific_type == 'defense_memo':
            return self._generate_defense_memo_prompt(query, retrieved_chunks, legal_issue, document_type)
    
        elif document_type.specific_type == 'lawsuit':
            return self._generate_lawsuit_prompt(query, retrieved_chunks, legal_issue, document_type)
        # Route to specific document generator
        if document_type.specific_type == 'defense_memo':
            return self._generate_defense_memo_prompt(query, retrieved_chunks, legal_issue, document_type)
        
        elif document_type.specific_type == 'lawsuit':
            return self._generate_lawsuit_prompt(query, retrieved_chunks, legal_issue, document_type)
        
        elif document_type.specific_type == 'appeal':
            return self._generate_appeal_prompt(query, retrieved_chunks, legal_issue, document_type)
        
        elif document_type.specific_type in ['sale_contract', 'employment_contract', 'lease_contract']:
            return self._generate_contract_prompt(query, retrieved_chunks, legal_issue, document_type)
        
        elif document_type.specific_type == 'demand_letter':
            return self._generate_demand_letter_prompt(query, retrieved_chunks, legal_issue, document_type)
        
    
        elif document_type.specific_type == 'execution_dispute':
            return self._generate_execution_dispute_prompt(query, retrieved_chunks, legal_issue, document_type)
    
        elif document_type.specific_type == 'family_inheritance_challenge':
            return self._generate_family_inheritance_memo(query, retrieved_chunks, legal_issue, document_type)
    
    # Your existing conditions continue...
        
        else:
            # Fallback to consultation
            return self._generate_consultation_prompt(query, retrieved_chunks, legal_issue)
    
    def _generate_defense_memo_prompt(
        self, 
        query: str, 
        retrieved_chunks: List[Chunk], 
        legal_issue: LegalIssue,
        document_type: DocumentType
) -> str:
        """Generate court-ready defense memo - PURE COURT DOCUMENT"""
    
        legal_context = self._format_legal_context(retrieved_chunks)
    
        return f"""Ø£Ù†Øª Ø£ÙØ¶Ù„ Ù…Ø­Ø§Ù…ÙŠ Ø¯ÙØ§Ø¹ ÙÙŠ Ø§Ù„Ù…Ø­Ø§ÙƒÙ… Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©. Ø§ÙƒØªØ¨ Ù…Ø°ÙƒØ±Ø© Ø¯ÙØ§Ø¹ Ø±Ø³Ù…ÙŠØ© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ù…Ø­ÙƒÙ…Ø©.

ğŸ“š **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ:**
{legal_context}

ğŸ“‹ **ÙˆÙ‚Ø§Ø¦Ø¹ Ø§Ù„Ø¯Ø¹ÙˆÙ‰:**
{query}

**Ø§ÙƒØªØ¨ Ù…Ø°ÙƒØ±Ø© Ø¯ÙØ§Ø¹ ÙƒØ§Ù…Ù„Ø© ÙˆØ¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªÙ‚Ø¯ÙŠÙ…:**

---

**Ù…Ø°ÙƒØ±Ø© Ø¯ÙØ§Ø¹**

**Ø£ÙˆÙ„Ø§Ù‹: Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹**
ØªØªÙ„Ø®Øµ ÙˆÙ‚Ø§Ø¦Ø¹ Ø§Ù„Ø¯Ø¹ÙˆÙ‰ ÙÙŠ: [Ø§ÙƒØªØ¨ Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹ Ø¨Ø§Ø®ØªØµØ§Ø± ÙˆØ¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø·ÙŠØ§Øª - Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® ÙˆØ§Ù„Ù…Ø¨Ø§Ù„Øº ÙˆØ§Ù„Ø£Ø·Ø±Ø§Ù Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©]

**Ø«Ø§Ù†ÙŠØ§Ù‹: Ø§Ù„Ø¯ÙÙˆØ¹ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©**

**Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø£ÙˆÙ„:** [Ø§ÙƒØªØ¨ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø£Ù‚ÙˆÙ‰ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹]
- Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ: [Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ù…Ù† Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø±ÙÙ‚Ø©]
- Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: [ÙƒÙŠÙ ÙŠÙ†Ø·Ø¨Ù‚ Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ù‚Ø¶ÙŠØ© ØªØ­Ø¯ÙŠØ¯Ø§Ù‹]

**Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ:** [Ø§ÙƒØªØ¨ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ]
- Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ: [Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©]
- Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: [Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹]

**Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø«Ø§Ù„Ø«:** [Ø§ÙƒØªØ¨ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø«Ø§Ù„Ø« Ø¥Ù† ÙˆØ¬Ø¯]
- Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ: [Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©]
- Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: [Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹]

**Ø«Ø§Ù„Ø«Ø§Ù‹: Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª**
- Ù…Ø±ÙÙ‚ (1): [Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨]
- Ù…Ø±ÙÙ‚ (2): [Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨]
- Ù…Ø±ÙÙ‚ (3): [Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ø«Ø§Ù„Ø« Ø¥Ù† ÙˆØ¬Ø¯]

**Ø±Ø§Ø¨Ø¹Ø§Ù‹: Ø§Ù„Ø·Ù„Ø¨Ø§Øª**
Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø§ ØªÙ‚Ø¯Ù…ØŒ Ø£Ù„ØªÙ…Ø³ Ù…Ù† Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø±Ø©:

1. Ø§Ù„Ø­ÙƒÙ… Ø¨Ø±ÙØ¶ Ø§Ù„Ø¯Ø¹ÙˆÙ‰ Ù„Ø¹Ø¯Ù… ØµØ­ØªÙ‡Ø§ Ù‚Ø§Ù†ÙˆÙ†Ø§Ù‹
2. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¯Ø¹ÙŠ ÙƒØ§ÙØ© Ø§Ù„Ø±Ø³ÙˆÙ… ÙˆØ§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù‚Ø¶Ø§Ø¦ÙŠØ©
3. [Ø£ÙŠ Ø·Ù„Ø¨Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ù‚Ø¶ÙŠØ©]

**ÙˆØ§Ù„Ù„Ù‡ Ø§Ù„Ù…ÙˆÙÙ‚**

---

**Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„ØµØ§Ø±Ù…Ø©:**
- Ø§ÙƒØªØ¨ Ù…Ø°ÙƒØ±Ø© Ø¯ÙØ§Ø¹ ÙÙ‚Ø· - Ù„Ø§ Ù†ØµØ§Ø¦Ø­ ÙˆÙ„Ø§ ØªØ­Ø°ÙŠØ±Ø§Øª ÙˆÙ„Ø§ Ø´Ø±ÙˆØ­Ø§Øª
- Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© ÙÙŠ Ø§Ù„Ù‚Ø¶ÙŠØ© ÙÙ‚Ø· (Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® ÙˆØ§Ù„Ù…Ø¨Ø§Ù„Øº ÙˆØ§Ù„Ø£Ø³Ù…Ø§Ø¡)
- Ø§Ø±Ø¨Ø· ÙƒÙ„ Ø¯ÙØ¹ Ø¨Ù…Ø§Ø¯Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ù…Ø­Ø¯Ø¯Ø© Ù…Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…Ø±ÙÙ‚Ø©
- Ø§ÙƒØªØ¨ Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ø¶Ø­Ø© ÙˆÙ…Ø­Ø¯Ø¯Ø© ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
- Ù„Ø§ ØªØ°ÙƒØ± "Ø®Ø·ÙˆØ§Øª Ø¹Ù…Ù„ÙŠØ©" Ø£Ùˆ "ØªØ­Ø°ÙŠØ±Ø§Øª" - Ù‡Ø°Ù‡ Ù…Ø°ÙƒØ±Ø© Ù‚Ø¶Ø§Ø¦ÙŠØ© ÙˆÙ„ÙŠØ³Øª Ø§Ø³ØªØ´Ø§Ø±Ø©"""

    def _generate_lawsuit_prompt(
        self, 
        query: str, 
        retrieved_chunks: List[Chunk], 
        legal_issue: LegalIssue,
        document_type: DocumentType
    ) -> str:
        """Generate court-ready lawsuit filing"""
        
        legal_context = self._format_legal_context(retrieved_chunks)
        
        return f"""Ø£Ù†Øª Ø£ÙØ¶Ù„ Ù…Ø­Ø§Ù…ÙŠ ØªÙ‚Ø§Ø¶ÙŠ ÙÙŠ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©. Ù…Ø·Ù„ÙˆØ¨ Ù…Ù†Ùƒ ÙƒØªØ§Ø¨Ø© Ù„Ø§Ø¦Ø­Ø© Ø¯Ø¹ÙˆÙ‰ Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ù…Ø­ÙƒÙ…Ø©.

ğŸ“š **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ:**
{legal_context}

ğŸ“‹ **ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù‚Ø¶ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø±ÙØ¹ Ø¯Ø¹ÙˆÙ‰ Ø¨Ù‡Ø§:**
{query}

**Ù…Ø·Ù„ÙˆØ¨ Ù…Ù†Ùƒ: ÙƒØªØ§Ø¨Ø© ØµØ­ÙŠÙØ© Ø¯Ø¹ÙˆÙ‰ Ø±Ø³Ù…ÙŠØ© ÙˆÙƒØ§Ù…Ù„Ø©**

**ğŸ›ï¸ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠØ©:**
1. Ø§ÙƒØªØ¨ ØµØ­ÙŠÙØ© Ø¯Ø¹ÙˆÙ‰ ÙƒØ§Ù…Ù„Ø© ÙˆØ¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªÙ‚Ø¯ÙŠÙ…
2. Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ù…Ø®ØªØµØ© Ø¨Ø¯Ù‚Ø©
3. Ø§ÙƒØªØ¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ÙˆÙ‚Ø§Ø¦Ø¹ ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª Ø¨ÙˆØ¶ÙˆØ­
4. Ø§Ø±Ø¨Ø· ÙƒÙ„ Ø·Ù„Ø¨ Ø¨Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø§Ù„Ù…Ø­Ø¯Ø¯

**ğŸ“‹ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠ Ù„ØµØ­ÙŠÙØ© Ø§Ù„Ø¯Ø¹ÙˆÙ‰:**

**ØµØ­ÙŠÙØ© Ø¯Ø¹ÙˆÙ‰ Ù…Ø¯Ù†ÙŠØ©**

**Ø¥Ù„Ù‰ ÙØ¶ÙŠÙ„Ø© Ø±Ø¦ÙŠØ³ [Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ù…Ø®ØªØµØ©]**

**Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø¹ÙŠ:**
Ø§Ù„Ø§Ø³Ù…: [Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø¶ÙŠØ©]
Ø§Ù„ØµÙØ©: [Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø¶ÙŠØ©]
Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: [Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø¶ÙŠØ©]

**Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø¹Ù‰ Ø¹Ù„ÙŠÙ‡:**
Ø§Ù„Ø§Ø³Ù…: [Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø¶ÙŠØ©]
Ø§Ù„ØµÙØ©: [Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø¶ÙŠØ©]
Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: [Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø¶ÙŠØ© Ø¥Ù† ÙˆØ¬Ø¯]

**Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¯Ø¹ÙˆÙ‰:**
[ÙˆØµÙ Ù…ÙˆØ¬Ø² ÙˆØ¯Ù‚ÙŠÙ‚]

**Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹:**
[ØªØ±Ù‚ÙŠÙ… Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹ ÙˆØªØ±ØªÙŠØ¨Ù‡Ø§ Ø²Ù…Ù†ÙŠØ§Ù‹]

**Ø§Ù„Ø£Ø³Ø§Ù†ÙŠØ¯ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©:**
[Ø±Ø¨Ø· Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹ Ø¨Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…Ø±ÙÙ‚Ø©]

**Ø§Ù„Ø·Ù„Ø¨Ø§Øª:**
Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø§ ØªÙ‚Ø¯Ù…ØŒ Ø£Ù„ØªÙ…Ø³ Ù…Ù† ÙØ¶ÙŠÙ„ØªÙƒÙ…:
Ø£ÙˆÙ„Ø§Ù‹: [Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ]
Ø«Ø§Ù†ÙŠØ§Ù‹: [Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ©]
Ø«Ø§Ù„Ø«Ø§Ù‹: ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¯Ø¹Ù‰ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ ÙˆØ£ØªØ¹Ø§Ø¨ Ø§Ù„Ù…Ø­Ø§Ù…Ø§Ø©

**Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:** 
Ø§Ù„ØªØ§Ø±ÙŠØ®:

**Ù‡Ø°Ù‡ Ø¯Ø¹ÙˆØ§ÙŠ ÙˆØ§Ù„Ù„Ù‡ Ø§Ù„Ù…ÙˆÙÙ‚**

**âš ï¸ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø­Ø§Ø³Ù…Ø©:**
- Ø§ÙƒØªØ¨ ØµØ­ÙŠÙØ© Ø¯Ø¹ÙˆÙ‰ ÙƒØ§Ù…Ù„Ø© ÙˆÙ‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙ‚Ø¯ÙŠÙ… ÙÙˆØ±Ø§Ù‹
- Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ù…Ù† Ø§Ù„Ù‚Ø¶ÙŠØ© ÙÙ‚Ø·
- Ø§Ø±Ø¨Ø· ÙƒÙ„ Ø·Ù„Ø¨ Ø¨Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
- Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ù…Ø®ØªØµØ© Ø¨Ø¯Ù‚Ø©"""

    def _generate_contract_prompt(
        self, 
        query: str, 
        retrieved_chunks: List[Chunk], 
        legal_issue: LegalIssue,
        document_type: DocumentType
    ) -> str:
        """Generate complete legal contract"""
        
        contract_type_map = {
            'sale_contract': 'Ø¨ÙŠØ¹',
            'employment_contract': 'Ø¹Ù…Ù„', 
            'lease_contract': 'Ø¥ÙŠØ¬Ø§Ø±',
            'partnership_contract': 'Ø´Ø±Ø§ÙƒØ©',
            'service_contract': 'Ø®Ø¯Ù…Ø§Øª'
        }
        
        contract_name = contract_type_map.get(document_type.specific_type, 'ØªØ¹Ø§Ù‚Ø¯')
        legal_context = self._format_legal_context(retrieved_chunks)
        
        return f"""Ø£Ù†Øª Ø£ÙØ¶Ù„ Ù…Ø­Ø§Ù…ÙŠ Ø¹Ù‚ÙˆØ¯ ÙÙŠ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©. Ù…Ø·Ù„ÙˆØ¨ Ù…Ù†Ùƒ ÙƒØªØ§Ø¨Ø© Ø¹Ù‚Ø¯ {contract_name} ÙƒØ§Ù…Ù„ ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„ØªÙˆÙ‚ÙŠØ¹.

ğŸ“š **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ù„Ù„Ø¹Ù‚Ø¯:**
{legal_context}

ğŸ“‹ **ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**
{query}

**Ù…Ø·Ù„ÙˆØ¨ Ù…Ù†Ùƒ: ÙƒØªØ§Ø¨Ø© Ø¹Ù‚Ø¯ {contract_name} ÙƒØ§Ù…Ù„ ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„ØªÙˆÙ‚ÙŠØ¹**

**ğŸ›ï¸ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠØ©:**
1. Ø§ÙƒØªØ¨ Ø¹Ù‚Ø¯ {contract_name} ÙƒØ§Ù…Ù„ Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
2. Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ØµÙŠØ§ØºØ© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©
3. Ø¶Ø¹ Ø¨Ù†ÙˆØ¯ ÙˆØ§Ø¶Ø­Ø© Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø·Ø±ÙÙŠÙ†
4. Ø§Ø±Ø¨Ø· Ø§Ù„Ø¹Ù‚Ø¯ Ø¨Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø§Ù„Ù…Ø¹Ù…ÙˆÙ„ Ø¨Ù‡Ø§

**ğŸ“‹ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¹Ù‚Ø¯:**

**Ø¹Ù‚Ø¯ {contract_name}**

**Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø£ÙˆÙ„:** [Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø£ÙˆÙ„]
**Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø«Ø§Ù†ÙŠ:** [Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø«Ø§Ù†ÙŠ]

**ØªÙ…Ù‡ÙŠØ¯:**
[ÙˆØµÙ Ù…ÙˆØ¬Ø² Ù„Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ø¹Ù‚Ø¯ ÙˆØ§Ù„ØºØ±Ø¶ Ù…Ù†Ù‡]

**Ø§Ù„Ø¨Ù†ÙˆØ¯ ÙˆØ§Ù„Ø´Ø±ÙˆØ·:**

**Ø§Ù„Ø¨Ù†Ø¯ Ø§Ù„Ø£ÙˆÙ„: Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø¯**
[ØªÙØµÙŠÙ„ Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø¯ Ø¨Ø¯Ù‚Ø©]

**Ø§Ù„Ø¨Ù†Ø¯ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø£ÙˆÙ„**
[Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù…Ø­Ø¯Ø¯Ø© ÙˆÙˆØ§Ø¶Ø­Ø©]

**Ø§Ù„Ø¨Ù†Ø¯ Ø§Ù„Ø«Ø§Ù„Ø«: Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø«Ø§Ù†ÙŠ**  
[Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù…Ø­Ø¯Ø¯Ø© ÙˆÙˆØ§Ø¶Ø­Ø©]

**Ø§Ù„Ø¨Ù†Ø¯ Ø§Ù„Ø±Ø§Ø¨Ø¹: Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ù…Ø§Ù„ÙŠ** 
[ØªØ­Ø¯ÙŠØ¯ Ø¯Ù‚ÙŠÙ‚ Ù„Ù„Ù…Ø¨Ø§Ù„Øº ÙˆØ§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯]

**Ø§Ù„Ø¨Ù†Ø¯ Ø§Ù„Ø®Ø§Ù…Ø³: Ù…Ø¯Ø© Ø§Ù„Ø¹Ù‚Ø¯**
[ØªØ­Ø¯ÙŠØ¯ Ø¯Ù‚ÙŠÙ‚ Ù„Ù„Ù…Ø¯Ø© ÙˆØ´Ø±ÙˆØ· Ø§Ù„ØªØ¬Ø¯ÙŠØ¯]

**Ø§Ù„Ø¨Ù†Ø¯ Ø§Ù„Ø³Ø§Ø¯Ø³: Ø´Ø±ÙˆØ· Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡**
[Ø­Ø§Ù„Ø§Øª ÙˆØ¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¹Ù‚Ø¯]

**Ø§Ù„Ø¨Ù†Ø¯ Ø§Ù„Ø³Ø§Ø¨Ø¹: Ø­Ù„ Ø§Ù„Ù†Ø²Ø§Ø¹Ø§Øª**
[Ø¢Ù„ÙŠØ© Ø­Ù„ Ø§Ù„Ù†Ø²Ø§Ø¹Ø§Øª ÙˆØ§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø­Ø§ÙƒÙ…]

**Ø§Ù„Ø¨Ù†Ø¯ Ø§Ù„Ø«Ø§Ù…Ù†: Ø£Ø­ÙƒØ§Ù… Ø¹Ø§Ù…Ø©**
[Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø§Ù„Ø¹Ø§Ù…Ø© ÙˆØ§Ù„Ø®ØªØ§Ù…ÙŠØ©]

**Ø§Ù„ØªÙˆÙ‚ÙŠØ¹Ø§Øª:**
Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø£ÙˆÙ„: _________________ Ø§Ù„ØªØ§Ø±ÙŠØ®: _________
Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø«Ø§Ù†ÙŠ: _________________ Ø§Ù„ØªØ§Ø±ÙŠØ®: _________

**âš ï¸ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø­Ø§Ø³Ù…Ø©:**
- Ø§ÙƒØªØ¨ Ø¹Ù‚Ø¯ {contract_name} ÙƒØ§Ù…Ù„ ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„ØªÙˆÙ‚ÙŠØ¹
- Ø§Ø³ØªØ®Ø¯Ù… ÙÙ‚Ø· Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙˆØ§Ø±Ø¯Ø© ÙÙŠ Ø§Ù„Ø·Ù„Ø¨
- Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø¹Ù‚Ø¯ Ù…ØªÙˆØ§Ø²Ù†Ø§Ù‹ ÙˆÙŠØ­Ù…ÙŠ Ø§Ù„Ø·Ø±ÙÙŠÙ†
- Ø§Ø±Ø¨Ø· Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø¨Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©"""

    def _generate_demand_letter_prompt(
        self, 
        query: str, 
        retrieved_chunks: List[Chunk], 
        legal_issue: LegalIssue,
        document_type: DocumentType
    ) -> str:
        """Generate formal demand letter"""
        
        legal_context = self._format_legal_context(retrieved_chunks)
        
        return f"""Ø£Ù†Øª Ù…Ø­Ø§Ù…ÙŠ Ù…ØªØ®ØµØµ ÙÙŠ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø®Ø·Ø§Ø¨Ø§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©. Ù…Ø·Ù„ÙˆØ¨ Ù…Ù†Ùƒ ÙƒØªØ§Ø¨Ø© Ø®Ø·Ø§Ø¨ Ø¥Ù†Ø°Ø§Ø± Ø±Ø³Ù…ÙŠ ÙˆÙ‚ÙˆÙŠ.

ğŸ“š **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ:**
{legal_context}

ğŸ“‹ **ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥Ù†Ø°Ø§Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**
{query}

**Ù…Ø·Ù„ÙˆØ¨ Ù…Ù†Ùƒ: ÙƒØªØ§Ø¨Ø© Ø®Ø·Ø§Ø¨ Ø¥Ù†Ø°Ø§Ø± Ø±Ø³Ù…ÙŠ ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø±Ø³Ø§Ù„**

**ğŸ“‹ Ù‡ÙŠÙƒÙ„ Ø®Ø·Ø§Ø¨ Ø§Ù„Ø¥Ù†Ø°Ø§Ø±:**

**Ø®Ø·Ø§Ø¨ Ø¥Ù†Ø°Ø§Ø± Ù‚Ø§Ù†ÙˆÙ†ÙŠ**

**Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ¯/Ø§Ù„Ø³ÙŠØ¯Ø©:** [Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„ Ø¥Ù„ÙŠÙ‡]
**Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:** [Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø±Ø³Ù„ Ø¥Ù„ÙŠÙ‡]

**Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹:** Ø¥Ù†Ø°Ø§Ø± Ù‚Ø§Ù†ÙˆÙ†ÙŠ - [Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¥Ù†Ø°Ø§Ø±]

**Ø§Ù„Ù…Ø­ØªØ±Ù…/Ø§Ù„Ù…Ø­ØªØ±Ù…Ø©ØŒ**

**Ø£ÙˆÙ„Ø§Ù‹: Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹**
[Ø³Ø±Ø¯ Ø§Ù„ÙˆÙ‚Ø§Ø¦Ø¹ Ø¨ÙˆØ¶ÙˆØ­ ÙˆØªØ±ØªÙŠØ¨ Ø²Ù…Ù†ÙŠ]

**Ø«Ø§Ù†ÙŠØ§Ù‹: Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ**  
[Ø§Ù„Ø§Ø³ØªÙ†Ø§Ø¯ Ù„Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©]

**Ø«Ø§Ù„Ø«Ø§Ù‹: Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø©**
[ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø© Ø¨ÙˆØ¶ÙˆØ­ ÙˆØ¯Ù‚Ø©]

**Ø±Ø§Ø¨Ø¹Ø§Ù‹: Ø§Ù„Ø¥Ù†Ø°Ø§Ø±**
Ø¹Ù„ÙŠÙ‡ØŒ Ø£Ù†Ø°Ø±ÙƒÙ… Ø¨Ø¶Ø±ÙˆØ±Ø© [ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨] Ø®Ù„Ø§Ù„ Ù…Ø¯Ø© [ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø¯Ø©] Ù…Ù† ØªØ§Ø±ÙŠØ® ØªØ³Ù„Ù… Ù‡Ø°Ø§ Ø§Ù„Ø¥Ù†Ø°Ø§Ø±.

**Ø®Ø§Ù…Ø³Ø§Ù‹: Ø§Ù„ØªØ­Ø°ÙŠØ±**
ÙÙŠ Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù„Ù…Ø·Ø§Ù„Ø¨Ø© Ø®Ù„Ø§Ù„ Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©ØŒ Ø³Ù†Ø¶Ø·Ø± Ù„Ø§ØªØ®Ø§Ø° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø§Ù„Ù„Ø§Ø²Ù…Ø© Ù„Ø­ÙØ¸ Ø§Ù„Ø­Ù‚ÙˆÙ‚.

**ÙˆØªÙØ¶Ù„ÙˆØ§ Ø¨Ù‚Ø¨ÙˆÙ„ ÙØ§Ø¦Ù‚ Ø§Ù„Ø§Ø­ØªØ±Ø§Ù…**

**Ø§Ù„ØªÙˆÙ‚ÙŠØ¹:** ________________
**Ø§Ù„ØªØ§Ø±ÙŠØ®:** ________________

**âš ï¸ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø­Ø§Ø³Ù…Ø©:**
- Ø§ÙƒØªØ¨ Ø®Ø·Ø§Ø¨ Ø¥Ù†Ø°Ø§Ø± Ø±Ø³Ù…ÙŠ ÙˆÙ‚ÙˆÙŠ
- Ø§Ø³ØªØ®Ø¯Ù… Ù„ØºØ© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ù…Ø¤Ø«Ø±Ø© ÙˆÙ…Ù‚Ù†Ø¹Ø©
- Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø© ÙˆØ§Ù„Ù…Ø¯Ø© Ø¨ÙˆØ¶ÙˆØ­
- Ø§Ø±Ø¨Ø· Ø§Ù„Ø¥Ù†Ø°Ø§Ø± Ø¨Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨"""

    def _generate_consultation_prompt(
        self, 
        query: str, 
        retrieved_chunks: List[Chunk], 
        legal_issue: LegalIssue
    ) -> str:
        """Generate legal consultation for advisory queries"""
        
        legal_context = self._format_legal_context(retrieved_chunks)
        
        return f"""Ø£Ù†Øª Ù…Ø³ØªØ´Ø§Ø± Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø³Ø¹ÙˆØ¯ÙŠ Ø®Ø¨ÙŠØ±. Ù…Ø·Ù„ÙˆØ¨ Ù…Ù†Ùƒ ØªÙ‚Ø¯ÙŠÙ… Ø§Ø³ØªØ´Ø§Ø±Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø´Ø§Ù…Ù„Ø© ÙˆÙ…ÙÙŠØ¯Ø©.

ğŸ“š **Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©:**
{legal_context}

â“ **Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ:**
{query}

**Ù…Ø·Ù„ÙˆØ¨ Ù…Ù†Ùƒ: Ø§Ø³ØªØ´Ø§Ø±Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø´Ø§Ù…Ù„Ø© ÙˆØ¹Ù…Ù„ÙŠØ©**

Ù‚Ø¯Ù… Ø§Ø³ØªØ´Ø§Ø±Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© ØªØ´Ù…Ù„:
- ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©
- Ø§Ù„Ø­Ù‚ÙˆÙ‚ ÙˆØ§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø°Ø§Øª Ø§Ù„ØµÙ„Ø©
- Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¥Ù† ÙˆØ¬Ø¯Øª
- Ø§Ù„ØªØ­Ø°ÙŠØ±Ø§Øª ÙˆØ§Ù„Ø§Ø­ØªÙŠØ§Ø·Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©
- Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©

Ø§Ø³ØªØ®Ø¯Ù… Ù„ØºØ© ÙˆØ§Ø¶Ø­Ø© ÙˆÙ…Ø¨Ø§Ø´Ø±Ø© Ù…Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©."""
    

    def _generate_appeal_prompt(
    self, 
    query: str, 
    retrieved_chunks: List[Chunk], 
    legal_issue: LegalIssue,
    document_type: DocumentType
) -> str:
        """Generate appeal memo prompt"""
        legal_context = self._format_legal_context(retrieved_chunks)
    
        return f"""Ø£Ù†Øª Ù…Ø­Ø§Ù…ÙŠ Ø§Ø³ØªØ¦Ù†Ø§Ù Ù…ØªØ®ØµØµ. Ø§ÙƒØªØ¨ Ù„Ø§Ø¦Ø­Ø© Ø§Ø¹ØªØ±Ø§Ø¶ÙŠØ© ÙƒØ§Ù…Ù„Ø© ÙˆØ¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªÙ‚Ø¯ÙŠÙ…
ğŸ“š **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ:**
{legal_context}

âš–ï¸ **Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø§Ø³ØªØ¦Ù†Ø§Ù:**
{query}

**Ù…Ø·Ù„ÙˆØ¨: Ù„Ø§Ø¦Ø­Ø© Ø§Ø¹ØªØ±Ø§Ø¶ÙŠØ© Ø±Ø³Ù…ÙŠØ© ÙˆÙƒØ§Ù…Ù„Ø©**

---

**Ù„Ø§Ø¦Ø­Ø© Ø§Ø¹ØªØ±Ø§Ø¶ÙŠØ©**

**Ø¥Ù„Ù‰ ÙØ¶ÙŠÙ„Ø© Ø±Ø¦ÙŠØ³ ÙˆØ£Ø¹Ø¶Ø§Ø¡ Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ø§Ø³ØªØ¦Ù†Ø§Ù**

**Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹:** Ù„Ø§Ø¦Ø­Ø© Ø§Ø¹ØªØ±Ø§Ø¶ÙŠØ© Ø¹Ù„Ù‰ [Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø­ÙƒÙ…]

**Ø£ÙˆÙ„Ø§Ù‹: Ø¹Ø¯Ù… ØµØ­Ø© Ø§Ù„Ø­ÙƒÙ… Ø§Ù„Ù…Ø³ØªØ£Ù†Ù**
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠ:** ÙˆÙÙ‚Ø§Ù‹ Ù„Ù„Ù…Ø§Ø¯Ø© (X) Ù…Ù† Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±Ø§ÙØ¹Ø§Øª Ø§Ù„Ø´Ø±Ø¹ÙŠØ©
- **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:** [ØªØ·Ø¨ÙŠÙ‚ Ù…Ø­Ø¯Ø¯ Ø¹Ù„Ù‰ ÙˆÙ‚Ø§Ø¦Ø¹ Ø§Ù„Ù‚Ø¶ÙŠØ©]

**Ø«Ø§Ù†ÙŠØ§Ù‹: Ù…Ø®Ø§Ù„ÙØ© Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ø´Ø±ÙŠØ¹Ø© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©**
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ø´Ø±Ø¹ÙŠ:** [Ø§Ù„Ù†Øµ Ø§Ù„Ø´Ø±Ø¹ÙŠ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨]
- **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:** [ÙƒÙŠÙ ØªÙ… Ø§Ù†ØªÙ‡Ø§Ùƒ Ø§Ù„Ø­ÙƒÙ… Ø§Ù„Ø´Ø±Ø¹ÙŠ]

**Ø«Ø§Ù„Ø«Ø§Ù‹: Ø§Ù„ÙØ³Ø§Ø¯ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¯Ù„Ø§Ù„ ÙˆØ§Ù„Ø¹ÙˆØ§Ø±**
- **Ø§Ù„Ø£Ø³Ø§Ø³ Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠ:** Ø¨Ù…ÙˆØ¬Ø¨ Ø§Ù„Ù…Ø§Ø¯Ø© (Y) Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…
- **Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:** [ØªØ­Ø¯ÙŠØ¯ Ø£ÙˆØ¬Ù‡ Ø§Ù„ÙØ³Ø§Ø¯ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¯Ù„Ø§Ù„]

**Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø°Ù„Ùƒ Ù†Ø·Ù„Ø¨ Ù…Ù† ÙØ¶ÙŠÙ„ØªÙƒÙ…:**
Ø£ÙˆÙ„Ø§Ù‹: Ù†Ù‚Ø¶ Ø§Ù„Ø­ÙƒÙ… Ø§Ù„Ù…Ø³ØªØ£Ù†Ù
Ø«Ø§Ù†ÙŠØ§Ù‹: Ø§Ù„Ø­ÙƒÙ… Ø¨Ù€ [Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø­Ø¯Ø¯]
Ø«Ø§Ù„Ø«Ø§Ù‹: ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¯Ø¹ÙŠ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ ÙˆØ§Ù„Ø±Ø³ÙˆÙ…

**ÙˆØ§Ù„Ù„Ù‡ Ø§Ù„Ù…ÙˆÙÙ‚**

---

**ØªØ¹Ù„ÙŠÙ…Ø§Øª:**
- Ø§Ø³ØªØ®Ø¯Ù… ÙÙ‚Ø· Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…Ø±ÙÙ‚Ø©
- Ø§Ø±Ø¨Ø· ÙƒÙ„ Ø§Ø¹ØªØ±Ø§Ø¶ Ø¨Ù…Ø§Ø¯Ø© Ù†Ø¸Ø§Ù…ÙŠØ© Ù…Ø­Ø¯Ø¯Ø©
- Ø§ÙƒØªØ¨ Ù„Ø§Ø¦Ø­Ø© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…Ø¨Ø§Ø´Ø±Ø©"""

    def _format_legal_context(self, retrieved_chunks: List[Chunk]) -> str:
        """Format retrieved legal documents for context"""
        if not retrieved_chunks:
            return "Ø³ÙŠØªÙ… Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø© Ø¨Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©."
        
        formatted_context = []
        for i, chunk in enumerate(retrieved_chunks, 1):
            formatted_context.append(f"ğŸ“„ **Ø§Ù„Ù…Ø±Ø¬Ø¹ {i}: {chunk.title}**\n{chunk.content}")
        
        return "\n\n".join(formatted_context)